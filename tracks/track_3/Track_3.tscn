[gd_scene load_steps=14 format=3 uid="uid://b7u0ky7ryw7dl"]

[ext_resource type="Script" path="res://tracks/track_path.gd" id="1_44ox7"]
[ext_resource type="Script" path="res://tracks/test_track/test_track.gd" id="1_owtna"]
[ext_resource type="Material" uid="uid://dtq6n1hnyg388" path="res://resources/track/materials/road/Track_3_road.tres" id="2_gei67"]
[ext_resource type="Material" uid="uid://drbtshamtiyev" path="res://resources/track/materials/curb/red_white_curb.tres" id="3_r1l2t"]
[ext_resource type="Texture2D" uid="uid://dy5gxnynssdsg" path="res://assets/road/track_3/fabric_pattern_07_4k.blend/textures/fabric_pattern_07_col_1_4k.png" id="4_55o22"]
[ext_resource type="Texture2D" uid="uid://drog8gx2n88il" path="res://assets/road/track_3/fabric_pattern_07_4k.blend/textures/fabric_pattern_07_nor_gl_4k.png" id="5_mwef3"]
[ext_resource type="Texture2D" uid="uid://b7g1df7ic4s53" path="res://assets/road/track_3/fabric_pattern_07_4k.blend/textures/fabric_pattern_07_rough_4k.jpg" id="6_y3fqe"]
[ext_resource type="Material" uid="uid://dh6ykun8bv60u" path="res://sky/examples/day_sky.tres" id="8_1jpko"]
[ext_resource type="Texture2D" uid="uid://q8beu8moq1nt" path="res://icon.svg" id="11_6mrka"]

[sub_resource type="Curve3D" id="Curve3D_t5yb4"]
bake_interval = 0.01
_data = {
"points": PackedVector3Array(-1.0634, 0, -0.0028168, 1.0634, 0, 0.0028168, 0.104994, 0.344653, -0.93092, -0.703733, 0.21729, -0.795505, 0.703733, -0.21729, 0.795505, 1.98588, 0.714089, -0.168277, 0.205976, 0.0258646, -0.275477, -0.205976, -0.0258646, 0.275477, 1.4546, -0.0995123, 2.15211, 0.95614, 0.0141261, -0.0536306, -0.95614, -0.0141261, 0.0536306, 0.248128, 0.101822, 3.2321, 0.301305, -0.151345, 1.29319, -0.301305, 0.151345, -1.29319, -2.70548, -0.0689994, 1.5128, -0.147576, -0.101514, 0.516867, 0.147576, 0.101514, -0.516867, -1.51507, -0.250158, -0.083222, -1.0634, 0, -0.0028168, 1.0634, 0, 0.0028168, 0.104994, 0.344653, -0.93092),
"tilts": PackedFloat32Array(0, 0.995784, 0, 0, 1.3348, 0, 0)
}
point_count = 7

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ms3w2"]
diffuse_mode = 3
albedo_texture = ExtResource("4_55o22")
metallic = 1.0
roughness = 0.3
roughness_texture = ExtResource("6_y3fqe")
normal_enabled = true
normal_scale = -3.59
normal_texture = ExtResource("5_mwef3")
rim_enabled = true
clearcoat_enabled = true
anisotropy_enabled = true
anisotropy = 1.0
proximity_fade_enabled = true
proximity_fade_distance = 0.01

[sub_resource type="Sky" id="Sky_au6q5"]
sky_material = ExtResource("8_1jpko")

[sub_resource type="Environment" id="Environment_d4vtu"]
background_mode = 2
sky = SubResource("Sky_au6q5")
ambient_light_source = 3
ambient_light_color = Color(0.45098, 0.333333, 0.309804, 1)
tonemap_mode = 2
glow_enabled = true
fog_light_energy = 0.02
fog_sky_affect = 0.5
volumetric_fog_enabled = true
volumetric_fog_density = 0.001
volumetric_fog_sky_affect = 0.01

[node name="Track3" type="Node3D"]
script = ExtResource("1_owtna")

[node name="TrackPath" type="Path3D" parent="."]
transform = Transform3D(10, 0, 0, 0, 10, 0, 0, 0, 10, 0, 0, 0)
curve = SubResource("Curve3D_t5yb4")
script = ExtResource("1_44ox7")
light_count = {
"count": 4,
"item_name": "light",
"item_path": "res://scenes/TrackLight.tscn",
"parent_name": "light_holder",
"parent_path": "TrackLights"
}
check_points = {
"count": 8,
"item_name": "CheckPoint",
"item_path": "res://CheckPoint.tscn",
"parent_name": "ChekPointHolder",
"parent_path": "CheckPoints"
}

[node name="Road" type="CSGPolygon3D" parent="TrackPath"]
material_override = ExtResource("2_gei67")
use_collision = true
polygon = PackedVector2Array(0, 0, 0, 0, 0.4, 0)
mode = 2
path_node = NodePath("..")
path_interval_type = 0
path_interval = 0.01
path_simplify_angle = 0.0
path_rotation = 2
path_local = false
path_continuous_u = true
path_u_distance = 1.0
path_joined = true

[node name="Inner" type="CSGPolygon3D" parent="TrackPath"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.000447212, 0, 0)
use_collision = true
polygon = PackedVector2Array(0.53, 0.005, 0.369566, -0.00571562, 0.53, 0.043)
mode = 2
path_node = NodePath("..")
path_interval_type = 0
path_interval = 0.01
path_simplify_angle = 0.0
path_rotation = 2
path_local = false
path_continuous_u = true
path_u_distance = 1.0
path_joined = true
material = ExtResource("3_r1l2t")

[node name="Outer" type="CSGPolygon3D" parent="TrackPath"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.000447212, 0, 0)
use_collision = true
polygon = PackedVector2Array(-0.2, 0.004, 0.0113549, -0.0058521, -0.2, 0.071)
mode = 2
path_node = NodePath("..")
path_interval_type = 0
path_interval = 0.01
path_simplify_angle = 0.0
path_rotation = 2
path_local = false
path_continuous_u = true
path_u_distance = 1.0
path_joined = true
material = SubResource("StandardMaterial3D_ms3w2")

[node name="TrackLights" type="Node3D" parent="TrackPath"]

[node name="CheckPoints" type="Node3D" parent="TrackPath"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_d4vtu")

[node name="StartGrid" type="Node3D" parent="."]
transform = Transform3D(0.104968, -0.245324, -0.963741, 0.026563, 0.969441, -0.243881, 0.994121, -8.19563e-08, 0.108277, -44.8375, 59.6712, -67.9397)

[node name="Marker3D" type="Marker3D" parent="StartGrid"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.61331, 11.8669)

[node name="Sprite3D" type="Sprite3D" parent="StartGrid/Marker3D"]
texture = ExtResource("11_6mrka")

[node name="Marker3D2" type="Marker3D" parent="StartGrid"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.08898, 2.46801, 13.3684)

[node name="Sprite3D2" type="Sprite3D" parent="StartGrid/Marker3D2"]
texture = ExtResource("11_6mrka")

[connection signal="body_entered" from="TrackPath/CheckPoints/ChekPointHolder/CheckPoint" to="TrackPath/CheckPoints/ChekPointHolder/CheckPoint" method="_on_body_entered"]
[connection signal="body_entered" from="TrackPath/CheckPoints/@Node3D@263145/CheckPoint" to="TrackPath/CheckPoints/@Node3D@263145/CheckPoint" method="_on_body_entered"]
[connection signal="body_entered" from="TrackPath/CheckPoints/@Node3D@263146/CheckPoint" to="TrackPath/CheckPoints/@Node3D@263146/CheckPoint" method="_on_body_entered"]
[connection signal="body_entered" from="TrackPath/CheckPoints/@Node3D@263147/CheckPoint" to="TrackPath/CheckPoints/@Node3D@263147/CheckPoint" method="_on_body_entered"]
[connection signal="body_entered" from="TrackPath/CheckPoints/@Node3D@263148/CheckPoint" to="TrackPath/CheckPoints/@Node3D@263148/CheckPoint" method="_on_body_entered"]
[connection signal="body_entered" from="TrackPath/CheckPoints/@Node3D@263149/CheckPoint" to="TrackPath/CheckPoints/@Node3D@263149/CheckPoint" method="_on_body_entered"]
[connection signal="body_entered" from="TrackPath/CheckPoints/@Node3D@263150/CheckPoint" to="TrackPath/CheckPoints/@Node3D@263150/CheckPoint" method="_on_body_entered"]
[connection signal="body_entered" from="TrackPath/CheckPoints/@Node3D@263151/CheckPoint" to="TrackPath/CheckPoints/@Node3D@263151/CheckPoint" method="_on_body_entered"]
